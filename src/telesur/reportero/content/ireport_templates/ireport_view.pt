<html xmlns="http://www.w3.org/1999/xhtml" xml:lang="en"
      xmlns:tal="http://xml.zope.org/namespaces/tal"
      xmlns:metal="http://xml.zope.org/namespaces/metal"
      xmlns:i18n="http://xml.zope.org/namespaces/i18n"
      lang="en"
      metal:use-macro="context/main_template/macros/master"
      i18n:domain="telesur.reportero">

<metal:styleslot fill-slot="style_slot" >

        <link rel="stylesheet" type="text/css" media="screen" href=""
              tal:attributes="href string:${context/absolute_url}/++resource++telesur.reportero/styles.css" />
</metal:styleslot>

<metal:javascriptslot fill-slot="javascript_head_slot" >

        <script type="text/javascript" src="++resource++telesur.reportero/javascript.js">
        </script>

</metal:javascriptslot>

<body>

<metal:main fill-slot="main">
    <tal:main-macro metal:define-macro="main">

    <div class="ireport-banner">
        <img src="++resource++telesur.reportero/soy_reportero.jpg" />
    </div>
        <div class="add-report-button">
        <a href="#" tal:attributes="href string:${context/absolute_url}/++add++telesur.reportero.anonreport"
                    tal:condition="view/can_add_reports"
                    class="report-link edit-report"
                    i18n:translate="">Add new report</a>
        </div>

        <div class="published-reports-list" tal:define="video_api nocall:context/@@video_api">
            <div class="main-report" tal:define="report_main view/main_report_new" tal:condition="report_main">
              <div id="main-report-media" 
                  tal:define="new_report report_main/getObject;
                              file_url new_report/get_file_url
              ">
                <tal:video condition="python:file_url and not report_main.is_image()">
                  <script type="text/javascript" src=""
                      tal:define="video_url python:video_api.get_video_widget_url('', 400, {'archivo_url':file_url})"                            
                      tal:attributes="src string:${video_url};"
                      tal:content="nothing">
                      Item Title
                  </script>
                  </tal:video>
                  <tal:image condition="python:file_url and report_main.is_image()">
                  <img tal:attributes="src file_url"/>
                  </tal:image>
              </div>
              <div id="main-report-data">
                <div id="main-report-title" tal:content="python:report_main.Title"></div>
                <div id="main-report-description" tal:content="python:report_main.Description"></div>
              </div>
              <div style="clear: both"></div>
            </div>
            <div id="report-items-carousel">
              <div id="report-arrow-left"><a tal:attributes="href python:context.absolute_url() + '?action=prev&actual='+ str(view.actual)"></a></div>
              <div id="report-reports">
              <tal:reports repeat="brain view/publics">
              <div class="report-item" tal:define="report brain/getObject">
                  <div class="report-item-thumb"><img tal:attributes="src report/get_thumb_image"/></div>
                  <div>
                  <a href="#" tal:define="report brain/getObject"
                              tal:attributes="href report/absolute_url"
                              tal:content="report/Title"
                              class="view-report"/>
                  </div>
              </div>
              </tal:reports>
              <div style="clear:both"></div>
              </div>
              <div id="report-arrow-right"><a tal:attributes="href python:context.absolute_url() + '?action=next&actual='+str(view.actual)"></a></div>
              <div style="clear:both"></div>
            </div>
        </div>

        <div class="non-published-reports-list"
             tal:condition="view/can_edit">
            <h2 i18n:translate="">Not published reports:</h2>
            <tal:reports repeat="brain view/get_non_published_reports">
            <div>
                <a href="#" tal:define="report brain/getObject"
                            tal:attributes="href report/absolute_url"
                            tal:content="report/Title"
                            class="view-report"/>
            </div>
            </tal:reports>
        </div>

    </tal:main-macro>
</metal:main>

</body>
</html>
